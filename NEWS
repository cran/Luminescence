NEWS for the R Package Luminescence

Changes in version 0.4.5 (10th August, 2015):

  Changes S4-objects, methods, classes:

         • With the (internal) switch from inlinedocs to roxygen2 used
           for the package manual compilation, some help page entries
           for our S4-methods got unintentionally lost. Unfortunately
           this remained unnoticed until the package was already on
           CRAN. This issue has been corrected by picking up some code
           changes we already made for the package version 0.5.0.
           However, this may become confusing in terms of warning
           messages ('deprecated') appearing by using object specific
           'get' or 'set' functions such as ‘get_RLum.Analysis’. The
           function calls are still working, but will be defunct in
           version 0.5.0 and removed in version 0.6.0 or better to say
           become part of more general calls like ‘get_RLum’,
           ‘set_RLum’ and so on.  With this update in fact this switch
           has already been made, but the 'old' functions are still
           supported and the warning messages may point on future
           necessary changes in your scripts.  Changes in detail:

             • Depraceted S4-generics: ‘set_RLum.Analyis’,
               ‘set_RLum.Data.Curve’, ‘set_RLum.Data.Image’,
               ‘set_RLum.Data.Spectrum’, ‘set_RLum.Results’,
               ‘get_RLum.Analyis’, ‘get_RLum.Data.Curve’,
               ‘get_RLum.Data.Image’, ‘get_RLum.Data.Spectrum’,
               ‘get_RLum.Results’, ‘length_RLum.Analysis’,
               ‘get_structure.RLum.Analysis’.

             • New S4-generics (partly they alreaded existed as plain R
               functions): ‘get_RLum’, ‘set_RLum’, ‘length_RLum’,
               ‘structure_RLum’.

             • This brings the following changes: ‘set_RLum’ now holds
               a argument ‘class’, e.g.: ‘set_RLum(class =
               'RLum.Results', data = data)’

         • ‘Risoe.BINfileData’: class definition was updated according
           to changes made in the R version 3.0.0 (without effect for
           the users).

         • All ‘RLum’ classes have been updated according to the
           changes in R version 3.0.0.

         • undefined error using ‘get_RLum(..., keep.object = TRUE)’
           for ‘RLum.Analysis’ objects are corrected (#233).

         • argument ‘recursive’ added to ‘get_RLum’ method for
           ‘RLum.Analysis’ class. This should prevent some loop related
           problems in cases ‘get_RLum’ returns a single RLum object
           instead a list of RLum objects

  Bugfixes and changes:

         • ‘analyse_IRSAR.RF()’

             • Arguments ‘fit.range.min’ and ‘fit.range.max’ have been
               removed and replaced by ‘RF_nat.lim’ and ‘RF_reg.lim’,

             • the argument ‘slide.outlier.rm’ and the underlying
               algorithm were removed from the function as the
               functionality turned out to be unreliable and
               'over-coded' for the intended purpose,

             • argument ‘xlab.unit’ removed (usage of ‘xlab’ is still
               possible),

             • argument ‘fit.MC.runs’ and ‘slide.MC.runs’ replaced by
               ‘n.MC’ (valid for both methods),

             • argument ‘slide.trend.corr’ has been removed and with
               this the underlying code, however, a trend is still
               calculated and used as rejection criteria,

             • argument ‘legend.pos’ moved to the ‘...’ argument,

             • function output ‘class’ containing the original function
               call

             • re-design and unify the function output by removing and
               adding output objects, see manual for further details,

             • the way the error is calculated and returned has been
               changed (see manual for details),

             • add argument ‘txtProgressBar’ (logical),

             • argument ‘slide.show.density’ renamed to
               ‘slide.show_density’,

             • implement rejection criteria (‘rejection.criteria’,
               details see manual),

             • minor graphical adjustments,

             • a lot of internal code polishing.

         • ‘calc_CentralDose()’

             • Fix error caused by zero value, function now returns
               ‘NA’ instead of crashing (#238).

         • ‘calc_SourceDoseRate()’

             • The arguments ‘measurement.date’ and ‘calib.date’ no
               accept also input objects of type 'Date',

             • if no ‘measurement.date’ is provided, it will be set
               automatically to today with a warning,

             • now vector can be passed to argumement
               ‘measurement.date’ this will be treated now a little bit
               more R like in the sense the output has the same length
               as the input length of the argument ‘measurement.date’.

         • ‘calc_Statistics()’

             • default setting of weights definition changed from 1/s
               to 1/s^2,

             • fix an error where weighted statistics cannot be
               calculated due to zero values in the input data.frame
               and the function breaks with unclear error message
               (#239). This also sloves the reported problem #236 for
               ‘plot_KDE’ and ‘plot_Histogram’.

         • ‘fit_CWCurve()’

             • fixed a bug that prevented error calculation when using
               the Levenberg-Marquardt algorithm.

         • ‘merge_Risoe.BINfileData()’

             • Confusing warning message corrected (#230, Thomas Kolb).

         • ‘merge_RLum.Data.Curve()’

             • Adapt function behaviour for curves with different
               number of data points, but similar channel resolution.
               Function returns a warning and perform the merging only
               for channels available in all curves.

         • ‘plot_AbanicoPlot()’

             • zlim-definition bug removed,

             • automatic bandwidth adjustment implemented,

             • automatic z-axis scaling for zero scatter implemented,

             • qr (quartile range) set as default option for scatter
               polygon,

             • option cinn (confidence intervals) changed to pnn
               (percentiles),

             • summary content 'in confidence interval' changed to 'in
               2 sigma',

             • argument central.value renamed to z.0,

             • argument centrality removed,

             • argument bar.col added.

         • ‘plot_KDE()’

             • summary content 'in confidence interval' changed to 'in
               2 sigma',

             • function crash caused by internal call calc_Statistics()
               (#238) was fixed (#236).

         • ‘plot_RadialPlot()’

             • summary content 'in confidence interval' changed to 'in
               2 sigma',

             • irritating message corrected for the case zero values
               had been supplied (#237).

         • ‘plot_RLum()’

             • The function adpopt the capability to handle ‘list’
               objects containing ‘RLum’.  This may improve the
               workflow in several cases.

         • ‘plot_RLum.Analysis()’

             • Fix an error that occurred for the argument combination
               ‘combine = TRUE’ and ‘RLum.Analysis’ objects that only
               contain one curve object of each type,

             • add argument ‘subset’ to allow a subset during plotting
               for a better workflow.  Arguments will be passed to the
               function ‘plot_RLum’.

         • ‘plot_RLum.Data.Curve()’

             • NA-test implemented. Nothing is plotted if the curve
               contains NA-values (previous behaviour: function stopped
               with an error).

         • ‘readBIN2R()’

             • Implemnt new logical argument called ‘fastForward’. If
               ‘TRUE’ the output is no longer a ‘Risoe.BINfileData’
               object, but a list of ‘RLum.Analysis’ objects.  This
               should allow a more efficient data processing in
               particular cases.

         • ‘readXSYG2R()’

             • The import will not break any longer if the XSYG file is
               incomplete. Incomplete sequences will be removed from
               the output (incl. terminal feedback), \

             • new logical argument ‘fastForward’ implemented for a
               more efficient data analysis (same functionality as for
               the function ‘readBIN2R()’.  If set to ‘TRUE’ only a
               list of ‘RLum.Analysis’ objects is returned, instead of
               a list of headers and ‘RLum.Analysis’ objects.

         • ‘Risoe.BINfileData2RLum.Data.Curve()’

             • Corrupt RisoeBINfileData-objects containing no
               measurement data (NPOINTS = 0) no longer cause an error
               during while the RLum.Data.Curve-object is produced.
               Curve x- and y-values are set to NA (BIN-file issue
               Norbert Mercier).

         • ‘Second2Gray()’

             • The data provided with the argument ‘dose.rate’ can be
               now also of type ‘data.frame’

         • ‘writeR2BIN()’

             • Fix some minor issues for if only empty text fields
               (e.g., COMMENT) are provided,

             • implement a function stop for the really rare case that
               someone tries to export a 'Risoe.BINfileData-class'
               object importet in the workspace with an old package
               version and now try to write it back to a BIN-file
               (e.g., the package example data).

  Example data:

             • The ‘Risoe.BINfileData-class’ objects in
               ‘ExampleData.BINfileData’ did not contain a ‘.RESERVED’
               slot for historical reasons.  So far this caused no
               problem, but if one wanted to write the BIN-file
               information back to a file an error occurred; this has
               been fixed now,

             • fix some internal package related example data size
               issues (no effect for the users).

  Internals:

             • Hopefully fix NAMESPACE issue with 'rgdal' package,

             • add imports from base packages as requested by CRAN,

             • further clean-up NAMESPACE file,

             • dependency to package 'zoo' removed for this build, will
               be added again in 0.5.0,

             • add import for package 'assertive' to hopefully provide
               more user friendly error messages,

             • add import for package 'digest' to generate unique ids
               for data sets.

